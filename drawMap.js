wall = [
	// Cafeteria
	{
		start: [0, 0],
		end: [25.5, 0]
	},
	{
		start: [25.5, 0],
		end: [25.5, 9]
	},
	{
		start: [25.5, 15],
		end: [25.5, 19.5]
	},
	{
		start: [25.5, 19.5],
		end: [0, 19.5]
	},
	{
		start: [0, 19.5],
		end: [0, 15]
	},
	{
		start: [0, 9],
		end: [0, 0]
	},
	{
		start: [21, 0],
		end: [25.5, 4.5]
	},
	{
		start: [19.8, 2.4],
		end: [5.7, 2.4],
		transparent: true
	},
	{
		start: [5.7, 2.4],
		end: [5.7, 6.6],
		transparent: true
	},
	{
		start: [5.7, 6.6],
		end: [19.8, 6.6],
		transparent: true
	},
	{
		start: [19.8, 6.6],
		end: [19.8, 2.4],
		transparent: true
	},
	{
		start: [19.8, 8.4],
		end: [5.7, 8.4],
		transparent: true
	},
	{
		start: [5.7, 8.4],
		end: [5.7, 12.6],
		transparent: true
	},
	{
		start: [5.7, 12.6],
		end: [19.8, 12.6],
		transparent: true
	},
	{
		start: [19.8, 12.6],
		end: [19.8, 8.4],
		transparent: true
	},
	{
		start: [19.8, 14.4],
		end: [5.7, 14.4],
		transparent: true
	},
	{
		start: [5.7, 14.4],
		end: [5.7, 18.6],
		transparent: true
	},
	{
		start: [5.7, 18.6],
		end: [19.8, 18.6],
		transparent: true
	},
	{
		start: [19.8, 18.6],
		end: [19.8, 14.4],
		transparent: true
	},
	{
		start: [0, 1.5],
		end: [4, 1.5],
		transparent: true
	},
	{
		start: [4, 1.5],
		end: [4, 0],
		transparent: true
	},

	// Cafeteria-Admin Hallway
	{
		start: [25.5, 9],
		end: [34.5, 9]
	},
	{
		start: [34.5, 15],
		end: [25.5, 15]
	},

	// Admin
	{
		start: [34.5, 9],
		end: [34.5, -3]
	},
	{
		start: [34.5, -3],
		end: [40.5, -3]
	},
	{
		start: [46.5, -3],
		end: [49.5, -3]
	},
	{
		start: [49.5, -3],
		end: [49.5, 19.5]
	},
	{
		start: [49.5, 19.5],
		end: [34.5, 19.5]
	},
	{
		start: [34.5, 19.5],
		end: [34.5, 15]
	},
	{
		start: [34.5, 0],
		end: [37.5, -3]
	},
	{
		start: [49.5, 13.5],
		end: [47.1, 13.5],
		transparent: true
	},
	{
		start: [47.1, 13.5],
		end: [47.1, 18],
		transparent: true
	},
	{
		start: [47.1, 18],
		end: [40.5, 18],
		transparent: true
	},
	{
		start: [40.5, 18],
		end: [40.5, 19.5],
		transparent: true
	},

	// Admin-Communications-Navigation Hallway
	{
		start: [40.5, -3],
		end: [40.5, -21]
	},
	{
		start: [46.5, -21],
		end: [46.5, -15]
	},
	{
		start: [46.5, -15],
		end: [57, -15]
	},
	{
		start: [57, -9],
		end: [46.5, -9]
	},
	{
		start: [46.5, -9],
		end: [46.5, -3]
	},

	// Navigation
	{
		start: [57, -15],
		end: [57, -16.5]
	},
	{
		start: [57, -16.5],
		end: [70.5, -16.5]
	},
	{
		start: [70.5, -16.5],
		end: [70.5, -1.5]
	},
	{
		start: [70.5, -1.5],
		end: [57, -1.5]
	},
	{
		start: [57, -1.5],
		end: [57, -9]
	},
	{
		start: [67.5, -16.5],
		end: [70.5, -13.5]
	},
	{
		start: [70.5, -4.5],
		end: [67.5, -1.5]
	},

	// Communications
	{
		start: [40.5, -15],
		end: [21, -15]
	},
	{
		start: [25.5, -15],
		end: [25.5, -28.5],
	},
	{
		start: [25.5, -33],
		end: [49.5, -33],
		transparent: true
	},
	{
		start: [49.5, -33],
		end: [49.5, -21]
	},
	{
		start: [49.5, -21],
		end: [46.5, -21]
	},
	{
		start: [40.5, -21],
		end: [37.5, -21]
	},
	{
		start: [37.5, -21],
		end: [31.5, -15]
	},

	// Communications-Medbay-UpperEngine Hallway
	{
		start: [25.5, -28.5],
		end: [15, -28.5]
	},
	{
		start: [15, -28.5],
		end: [15, -24]
	},
	{
		start: [7.5, -24],
		end: [7.5, -28.5]
	},
	{
		start: [7.5, -28.5],
		end: [-4.5, -28.5],
	},
	{
		start: [-4.5, -28.5],
		end: [-4.5, -22.5]
	},
	{
		start: [-4.5, -22.5],
		end: [0, -22.5]
	},
	{
		start: [0, -18],
		end: [-10.5, -18]
	},
	{
		start: [-10.5, -12],
		end: [-10.5, -28.5]
	},
	{
		start: [-10.5, -28.5],
		end: [-22.5, -28.5]
	},
	{
		start: [-22.5, -33],
		end: [25.5, -33]
	},

	// Medbay
	{
		start: [15, -24],
		end: [21, -24]
	},
	{
		start: [21, -24],
		end: [21, 0]
	},
	{
		start: [21, -4.5],
		end: [7.5, -4.5]
	},
	{
		start: [7.5, -4.5],
		end: [7.5, -16.5]
	},
	{
		start: [7.5, -16.5],
		end: [0, -16.5]
	},
	{
		start: [0, -16.5],
		end: [0, -18]
	},
	{
		start: [0, -22.5],
		end: [0, -24]
	},
	{
		start: [0, -24],
		end: [7.5, -24]
	},
	{
		start: [17.2, -4.5],
		end: [17.2, -6.9],
		transparent: true
	},
	{
		start: [17.2, -6.9],
		end: [7.5, -6.9],
		transparent: true
	},

	// UpperEngine
	{
		start: [-22.5, -28.5],
		end: [-22.5, -15]
	},
	{
		start: [-22.5, -15],
		end: [-25.5, -15]
	},
	{
		start: [-31.5, -15],
		end: [-34.5, -15]
	},
	{
		start: [-34.5, -15],
		end: [-34.5, -33]
	},
	{
		start: [-34.5, -33],
		end: [-22.5, -33],
		transparent: true
	},
	{
		start: [-34.5, -30],
		end: [-31.5, -33]
	},

	// UpperEngine-Electrical-LowerEngine Hallway
	{
		start: [-25.5, -15],
		end: [-25.5, -9]
	},
	{
		start: [-25.5, -9],
		end: [-19.5, -9]
	},
	{
		start: [-19.5, -3],
		end: [-25.5, -3]
	},
	{
		start: [-25.5, -3],
		end: [-25.5, 3]
	},
	{
		start: [-31.5, 3],
		end: [-31.5, -15]
	},

	// Electrical
	{
		start: [-19.5, -9],
		end: [-19.5, -12]
	},
	{
		start: [-19.5, -12],
		end: [7.5, -12]
	},
	{
		start: [4.5, -12],
		end: [4.5, -4.5]
	},
	{
		start: [4.5, -4.5],
		end: [-4.5, -4.5]
	},
	{
		start: [-4.5, -4.5],
		end: [-4.5, 9]
	},
	{
		start: [-4.5, -0],
		end: [-19.5, -0]
	},
	{
		start: [-19.5, -0],
		end: [-19.5, -3]
	},
	{
		start: [-16.5, -12],
		end: [-16.5, -3]
	},
	{
		start: [-16.5, -3],
		end: [-13.5, -3]
	},
	{
		start: [-13.5, -3],
		end: [-13.5, -12]
	},
	{
		start: [-7.5, 0],
		end: [-7.5, -9],
	},
	{
		start: [-7.5, -9],
		end: [-10.5, -9],
	},
	{
		start: [-10.5, -9],
		end: [-10.5, 0],
	},

	// LowerEngine
	{
		start: [-25.5, 3],
		end: [-22.5, 3]
	},
	{
		start: [-22.5, 3],
		end: [-22.5, 9]
	},
	{
		start: [-22.5, 15],
		end: [-22.5, 19.5]
	},
	{
		start: [-22.5, 19.5],
		end: [-34.5, 19.5]
	},
	{
		start: [-34.5, 19.5],
		end: [-34.5, 3]
	},
	{
		start: [-34.5, 3],
		end: [-31.5, 3]
	},
	{
		start: [-31.5, 19.5],
		end: [-34.5, 16.5]
	},

	// LowerEngine-Cafeteria Hallway
	{
		start: [-22.5, 9],
		end: [0, 9]
	},
	{
		start: [0, 15],
		end: [-22.5, 15]
	},

	// Secret
	{
		start: [22.5, -10.5],
		end: [33, -10.5]
	},
	{
		start: [33, -10.5],
		end: [33, -6]
	},
	{
		start: [33, -6],
		end: [22.5, -6]
	},
	{
		start: [22.5, -6],
		end: [22.5, -10.5]
	},
]
document.write('<canvas id="aa"></canvas>')
aa = document.getElementById('aa')
aa.style.height = '100%'
aa.style.width = '100%'
cc = aa.getContext("2d");

wb = [
	[-40.5, -45],
	[79.5, 42]
]
aa.height = (wb[1][1] - wb[0][1]) * 25
aa.width = (wb[1][0] - wb[0][0]) * 25;
cc.lineWidth = 5;
function cp([x, y]) { return [(x - wb[0][0]) / (wb[1][0] - wb[0][0]) * aa.width, (y - wb[0][1]) / (wb[1][1] - wb[0][1]) * aa.height] }
for (let i = Math.ceil(wb[0][0] / 20) * 20; i <= wb[1][0]; i += 20) {
	let t = cp([i, 0])[0];
	cc.beginPath(); cc.strokeStyle = '#00ff00'; cc.moveTo(t, 0); cc.lineTo(t, aa.height); cc.stroke();
}
for (let i = Math.ceil(wb[0][1] / 20) * 20; i <= wb[1][1]; i += 20) {
	let t = cp([0, i])[1];
	cc.beginPath(); cc.strokeStyle = '#00ff00'; cc.moveTo(0, t); cc.lineTo(aa.width, t); cc.stroke();
}
wp = wall.map(x => [cp(x.start), cp(x.end), x.transparent])
wp.map(([x, y, z]) => {
	cc.beginPath(); cc.lineWidth = x[0] !== y[0] ? 25 : 50; cc.strokeStyle = z ? '#ff0000' : '#000000'; cc.moveTo(...x); cc.lineTo(...y); cc.stroke(); cc.lineWidth = 5; cc.beginPath();
	u = [y[0] - x[0], y[1] - x[1]];
	mid = [(y[0] + x[0]) / 2, (y[1] + x[1]) / 2];
	v = [-u[1], u[0]];
	tt = Math.sqrt(u[0] * u[0] + u[1] * u[1]);
	v = [v[0] / tt * 12.5, v[1] / tt * 12.5];
	tar = [mid[0] + v[0], mid[1] + v[1]];
	cc.moveTo(...mid); cc.lineTo(...tar); cc.strokeStyle = '#ccc';
	cc.stroke();
})
cc.stroke();

sp = [
	[
		[-40.5, 36],
		[-34.5, 36],
		[-34.5, 42],
		[-40.5, 42]
	],
	[
		[24, -10.5],
		[31.5, -10.5],
		[31.5, -9],
		[24, -9]
	]
];
sp.map(x => {
	xc = x.map(v => cp(v));
	cc.moveTo(...xc[0]); xc.slice(1).map(x => cc.lineTo(...x));
	cc.lineTo(...xc[0]);
	cc.stroke();
})
sp2 = [

	[11.5, 8],
	[11.5, 13],
	[9, 8],
	[16.5, 13],
	[14, 8],
	[6.5, 13],
	[19, 13],
	[16.5, 8],
	[14, 13],
	[9, 13],
	[19, 8],
	[6.5, 8],
]
sp2.map(x => {
	v = cp(x);
	cc.beginPath();
	cc.arc(...v, 12.5, 0, 2 * Math.PI, false);
	cc.stroke();
});

cc.beginPath();
cc.setLineDash([5, 5]);
wall = [
	{
		start: [6, -4.5],
		end: [30, -4.5]
	},
	{
		start: [30, -4.5],
		end: [30, 13.5]
	},
	{
		start: [30, 13.5],
		end: [6, 13.5]
	},
	{
		start: [6, 13.5],
		end: [6, -4.5]
	},
	{
		start: [6, 0],
		end: [15, -4.5]
	},
	{
		start: [21, -4.5],
		end: [30, 0]
	},
]

function cp([x, y]) { return [(x - wb[0][0]) / (wb[1][0] - wb[0][0]) * aa.width, (y - wb[0][1]) / (wb[1][1] - wb[0][1]) * aa.height] }
wp = wall.map(x => [cp(x.start), cp(x.end)])
wp.map(([x, y]) => {
	cc.moveTo(...x); cc.lineTo(...y);
	u = [y[0] - x[0], y[1] - x[1]];
	mid = [(y[0] + x[0]) / 2, (y[1] + x[1]) / 2];
	v = [-u[1], u[0]];
	tt = Math.sqrt(u[0] * u[0] + u[1] * u[1]);
	v = [v[0] / tt * 12.5, v[1] / tt * 12.5];
	tar = [mid[0] + v[0], mid[1] + v[1]];
	cc.moveTo(...mid); cc.lineTo(...tar);

})
cc.stroke();

cc.beginPath();
sp = [[[16.5, 3],
[19.5, 3],
[19.5, 6],
[16.5, 6],],

[[15, -4.5],
[20.5, -4.5],
[20.5, -3],
[15, -3],],
[[0, -18], [36, -18],
[36, 30], [0, 30]]
];

sp2 = [[7.5, 0],
[28.5, 0],
[9, -0.75],
[27, -0.75],
[10.5, -1.5],
[25.5, -1.5],
[12, -2.25],
[24, -2.25],
[13.5, -3],
[22.5, -3],
[15, -3.75],
[21, -3.75],];
sp.map(x => {
	xc = x.map(v => cp(v));
	cc.moveTo(...xc[0]); xc.slice(1).map(x => cc.lineTo(...x));
	cc.lineTo(...xc[0]);
	cc.stroke();
})
sp2.map(x => {
	v = cp(x);
	cc.beginPath();
	cc.arc(...v, 12.5, 0, 2 * Math.PI, false);
	cc.stroke();
})